/*! Built with http://stenciljs.com */
SoonColorpicker.loadBundle("hhnp16ue",["exports"],function(e){var o=window.SoonColorpicker.h,t=function(){function e(){this.opened=!1,this.hasFocus=!1,this.value=null}return e.prototype.soonClose=function(){this.onBlur()},e.prototype.soonOpen=function(){this.opened=!0,this.onFocus()},e.prototype.valueChange=function(){this._initColor()},e.prototype.imageChange=function(e){e&&this._initCanvas()},e.prototype.handleEnter=function(){this.soonOpen()},e.prototype.handleESC=function(){this.soonClose()},e.prototype.componentDidLoad=function(){var e=this;this._initColor(),this._initCanvas(),this.el.addEventListener("focus",function(){e.onFocus()}),this.el.addEventListener("blur",function(){e.onBlur()})},e.prototype.onBlur=function(){this.hasFocus=!1,this.opened=!1,this.soonBlur.emit()},e.prototype.onFocus=function(){this.hasFocus=!0,this.soonFocus.emit()},e.prototype.hasValue=function(){return null!=this.value&&""!==this.value},e.prototype.hostData=function(){return{role:"colorpicker",tabIndex:0,interactive:!0,class:{"has-value":this.hasValue(),"has-focus":this.hasFocus}}},e.prototype.render=function(){var e=this;return[o("div",{class:"color",onClick:function(){return e.opened=!0}}),o("canvas",{class:"selector "+(this.opened?"opened":"")})]},e.prototype._initColor=function(){var e=this.el.shadowRoot.querySelector(".color");e&&(e.style.backgroundColor=this.value?this.value:"#fafbfd")},e.prototype._setColor=function(e){this.value=e,this.opened=!1,this.soonChange.emit({value:this.value})},e.prototype._initCanvas=function(){var e=this,o=this.el.shadowRoot.querySelector(".selector"),t=this.el.shadowRoot.querySelector(".color");o.width=150,o.height=150;var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){o.width=n.width,o.height=n.height,o.getContext("2d").drawImage(n,0,0,n.width,n.height),o.style.left="-"+(n.width/2-t.clientWidth/2)+"px"},n.src=this.image,o.onmousedown=function(t){t.preventDefault(),t.stopPropagation();var n=t.target.getBoundingClientRect(),r=o.getContext("2d").getImageData(t.clientX-n.left,t.clientY-n.top,1,1).data,i=e._rgbToHex("rgb("+r[0]+","+r[1]+","+r[2]+")");e._setColor(i)}},e.prototype._rgbToHex=function(e){var o=e.match(/\d+/g);function t(e){var o=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");return isNaN(e)?"00":o[(e-e%16)/16]+o[e%16]}return"#"+t(o[0])+t(o[1])+t(o[2])},Object.defineProperty(e,"is",{get:function(){return"soon-colorpicker"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{el:{elementRef:!0},hasFocus:{state:!0},image:{type:String,attr:"image",watchCallbacks:["imageChange"]},opened:{state:!0},soonClose:{method:!0},soonOpen:{method:!0},value:{type:String,attr:"value",mutable:!0,watchCallbacks:["valueChange"]}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"soonBlur",method:"soonBlur",bubbles:!0,cancelable:!0,composed:!0},{name:"soonFocus",method:"soonFocus",bubbles:!0,cancelable:!0,composed:!0},{name:"soonChange",method:"soonChange",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"listeners",{get:function(){return[{name:"keydown.enter",method:"handleEnter"},{name:"keydown.escape",method:"handleESC"}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return":host{display:inline-block;position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;width:var(--element-size,32px);height:var(--element-size,32px);border-radius:50%;padding:2px;background:#fff;-webkit-box-shadow:0 0 6px 0 rgba(0,0,0,.1);box-shadow:0 0 6px 0 rgba(0,0,0,.1);vertical-align:middle}:host .color{display:block;width:calc(var(--element-size, 32px) - 4px);height:calc(var(--element-size, 32px) - 4px);border-radius:50%;background:#fafbfd;cursor:pointer}:host .selector{position:absolute;visibility:hidden;opacity:0;-webkit-transform:scale(0);transform:scale(0);margin:auto;top:0;bottom:0;cursor:crosshair;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;z-index:var(--element-zindex,9999)}:host .selector.opened{visibility:visible;opacity:1;-webkit-transform:scale(1);transform:scale(1)}:host(:focus){outline:none}"},enumerable:!0,configurable:!0}),e}();e.SoonColorpicker=t,Object.defineProperty(e,"__esModule",{value:!0})});